<div class="content-container " nzTypography>
  <div class="ads-bar-container padded-y">
    <img src="https://placehold.it/1000x150?text=user%20avatar" alt="adverts bar">
  </div>

  <ng-container *ngIf="(productSvc.product$ | async) as product; else loadingTemplate">
    <div class="product-container flexed padded center-x wrap">
      <div class="image flexed center">
        <img [src]="product.imageUrl" [alt]="product.name">
      </div>

      <section class="details flexed col">
        <h1 nzTypography class="name">{{product.name}}</h1>

        <div class="rating">
          <nz-rate [ngModel]="product.averageReview" nzAllowHalf nzDisabled></nz-rate>
        </div>

        <div class="order-summary">
          <div class="options flexed">
            <section class="quantity flexed col">
              <label for="quantity" class="padded-05-y">
                Quantidade
              </label>
              <nz-input-number aria-label-="quantity" id="quantity" name="quantity"
                               [(ngModel)]="quantity"
                               [nzMin]="1"
                               [nzMax]="50"
                               [nzStep]="1"></nz-input-number>
            </section>

            <div class="sized-box"></div>

            <section class="price flexed col">
              <div class="padded-05-y">Preço</div>
              <h2>{{product.price * quantity | currency: 'Kzs '}}</h2>
            </section>
          </div>
          <div class="sized-box"></div>

          <div class="details">
            <textarea #orderDetails
                      [(ngModel)]="details"
                      nz-input
                      [nzAutosize]="{ minRows: 5, maxRows: 7 }"
                      minlength="10"
                      maxlength="300"
                      placeholder="Pedido personalizado? Escreva o que deseja aqui..."
                      aria-label="order customizations"> </textarea>
          </div>
        </div>

        <!-- <span class="spacer"></span> -->
        <div class="sized-box"></div>

        <div class="flexed">
          <span class="spacer"></span>

          <button (click)="addToBasket()" nz-button nzType="primary">
            <i nz-icon nzType="shopping"></i>
            Adicionar
          </button>
        </div>
      </section>
    </div>

    <div class="sized-box-2"></div>

    <div class="extras flexed wrap">
      <nz-card id="order-options"
               class="container order-options"
               nzTitle="Detalhes">
        <div class="order-details">
          <p class="description">
            {{product.description}}
          </p>
        </div>
      </nz-card>

      <nz-card class="container comments card-head-padding-sm" nzTitle="Comentários">
        <div class="flexed center">
          <h2>Opções de comentários em breve!</h2>
        </div>
      </nz-card>
    </div>
  </ng-container>

  <ng-template #loadingTemplate>
    <div class="product-container padded flexed center-x wrap">
      <div class="image flexed center">
        <nz-skeleton-element
                             nzType="image"
                             [nzActive]="true">
        </nz-skeleton-element>

      </div>

      <section class="details">
        <h1 nzTypography class="name">
          <nz-skeleton-element nzType="input"
                               [nzActive]="true"
                               [nzSize]="'small'"
                               style="width:100%">
          </nz-skeleton-element>

        </h1>

        <div class="rating">
          <nz-skeleton-element nzType="input"
                               [nzActive]="true"
                               [nzSize]="'small'"
                               style="width:100%"></nz-skeleton-element>
        </div>

        <div class="description">
          <nz-skeleton-element nzType="input"
                               [nzActive]="true"
                               [nzSize]="'small'"
                               style="width:100%"></nz-skeleton-element>

          <nz-skeleton-element nzType="input"
                               [nzActive]="true"
                               [nzSize]="'small'"
                               style="width:100%"></nz-skeleton-element>
        </div>

        <div class="order-summary">
          <div class="options flexed">
            <div class="sized-box"></div>
          </div>

          <div class="sized-box"></div>

          <nz-skeleton-element nzType="input"
                               [nzActive]="true"
                               [nzSize]="'small'"
                               style="width:100%"></nz-skeleton-element>
        </div>
      </section>
    </div>

    <div class="sized-box-2"></div>
  </ng-template>
</div>
